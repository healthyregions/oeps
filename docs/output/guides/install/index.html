<!DOCTYPE html><html class="writer-html5" lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="shortcut icon" href="../../img/favicon.ico">
    <title>Installing the Components - OEPS Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css">
    <link rel="stylesheet" href="../../css/theme_extra.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    
      <script>
        // Current page data
        var mkdocs_page_name = "Installing the Components";
        var mkdocs_page_input_path = "guides/install.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
        </style></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> OEPS Documentation
        </a><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here">
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../overview/">OEPS Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legacy-migration/">Migration/Restructure 2023</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Guides</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Installing the Components</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#oeps-explorer">OEPS Explorer</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#more-about-mapbox-dependencies">More about Mapbox dependencies</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#oeps-backend">OEPS Backend</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#install-python-dependencies">Install Python dependencies</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#using-docker">Using Docker</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#local-install">Local install</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dev-dependencies">Dev dependencies</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#docs-dependencies">Docs dependencies</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#oeps-documentation">OEPS Documentation</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started-with-cli/">Getting Started with the CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../provisioning-oeps-explorer/">Provisioning OEPS Explorer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adding-data-to-oeps/">Adding Data to OEPS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../creating-data-packages/">Creating Data Packages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../interacting-with-bigquery/">Interacting with OEPS Data in BigQuery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../generating-derived-documentation/">Generating Derived Documentation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Registry</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../registry/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../registry/metadata/">Metadata</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../registry/variables/">Variables</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../registry/table-sources/">Table Sources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../registry/geodata-sources/">Geodata Sources</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CLI Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cli/bigquery-export/">bigquery-export</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cli/bigquery-upload/">bigquery-upload</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cli/build-docs/">build-docs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../reference/cli/build-explorer-docs.md">None</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../reference/cli/build-explorer-map.md">None</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cli/create-data-dictionaries/">create-data-dictionaries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cli/create-data-package/">create-data-package</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../reference/cli/inspect-csv.md">None</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../reference/cli/merge-data-table.md">None</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cli/validate-registry/">validate-registry</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">OEPS Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Developer Guides</li>
      <li class="breadcrumb-item active">Installing the Components</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="installing-the-components">Installing the Components</h1>
<p>The OEPS Explorer, OEPS Backend (which contains the registry), and this set of documentation each live in different directories of the same repository: <a href="https://github.com/healthyregions/oeps">github.com/healthyregions/oeps</a>. Each component operates independently, so there is no need to install them all at once.</p>
<p>To begin, clone the repo locally,</p>
<pre><code class="language-shell">git clone https://github.com/healthyregions/oeps
</code></pre>
<p>then you can install any of the following components:</p>
<ul>
<li><a href="#oeps-explorer">OEPS Explorer</a></li>
<li><a href="#oeps-backend">OEPS Backend</a></li>
<li><a href="#oeps-documentation">OEPS Documentation</a></li>
</ul>
<h2 id="oeps-explorer">OEPS Explorer</h2>
<p>To get started locally with the explorer:</p>
<pre><code>
cd oeps/explorer
yarn install
cp .env.example .env
</code></pre>
<p>Some environment variable values will already be set in <code>.env</code>, but you'll need to add a Mapbox token. Then run</p>
<pre><code>yarn dev
</code></pre>
<p>and open <code>http://localhost:3000</code></p>
<h3 id="more-about-mapbox-dependencies">More about Mapbox dependencies</h3>
<p>Two Mapbox Tilesets must be configured externally and linked within this app, one for Zip Code Tabulation Areas (ZCTAs) and one for Census Tracts. These geometries are joined with CSV tables to drive map visualizations.</p>
<p>Additionally, a basemap style must be provided, as well as a Mapbox access token. All of these elements are (currently) provided through environment variables, so make sure your <code>.env</code> file has the following:</p>
<pre><code>NEXT_PUBLIC_MAPBOX_TOKEN=&lt;your token&gt;
NEXT_PUBLIC_MAPBOX_STYLE="mapbox://styles/&lt;account id&gt;/&lt;style id&gt;"
</code></pre>
<h2 id="oeps-backend">OEPS Backend</h2>
<p>The OEPS Backend is a suite of command line tools, built within the Flask framework. <em>Using the backend does not require a long running process or external database.</em> It simply automates certain operations that are performed on files within the repository. After an operation has been performed, it is typically necessary to commit the changes and then create a pull request. In the future, perhaps it will make sense to convert some of the operations to API routes, but for now Flask is merely a wrapper.</p>
<h3 id="install-python-dependencies">Install Python dependencies</h3>
<h4 id="using-docker">Using Docker</h4>
<p>The easiest way to run backend commands is to use Docker--no need to create a Python virtual environment. Simply enter the backend directory and run:</p>
<pre><code>docker compose run -it oeps [CLI COMMAND]
</code></pre>
<p>For example, to print help for all of the commands, run</p>
<pre><code>docker compose run -it oeps flask --help
</code></pre>
<p>and you should get a printout of about 10 commands.</p>
<p>If you are making changes to the backend code, then include the <code>--build</code> flag to rebuild the container during the command:</p>
<pre><code>docker compose run -it oeps [CLI COMMAND]
</code></pre>
<p>Because the build process takes a little while, you may want to create a local install for more rapid development.</p>
<h4 id="local-install">Local install</h4>
<ol>
<li>
<p>Enter the backend directory</p>
<pre><code>cd oeps/backend
</code></pre>
</li>
<li>
<p>Create and activate a <a href="https://realpython.com/python-virtual-environments-a-primer/">Python virtual environment</a> with <a href="https://docs.python.org/3/library/venv.html">venv</a>, <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html">Conda</a>, or your other tool of choice.</p>
<p>For example, using the <code>venv</code> module that is included in Python 3, the commands will be:</p>
<pre><code>python3 -m venv env
source ./env/bin/activate
</code></pre>
<p>This will create a new directory <code>env/</code>, and when properly activated your command prompt will have a <code>(env)</code> prefix.</p>
</li>
<li>
<p>Install this package and its dependencies</p>
<pre><code>pip install -e .
</code></pre>
</li>
<li>
<p>Create a <code>.env</code> file from the provided template (no need to update any values right now)</p>
<pre><code>cp .env.example .env
</code></pre>
</li>
</ol>
<p>Success! To test your install, run:</p>
<pre><code class="language-shell">flask --help
</code></pre>
<p>You should see a printout that lists about 10 commands. You can now head to <a href="../getting-started-with-cli/">Getting Started with the CLI</a> to learn more about using these commands.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you only see three commands (<code>routes</code>, <code>run</code>, and <code>shell</code>), then you either need to activate your virtual environment or make sure you have a <code>.env</code> file with <code>FLASK_APP=oeps</code> in it. (These three are default Flask commands.)</p>
</div>
<h3 id="dev-dependencies">Dev dependencies</h3>
<p>If you are contributing code or otherwise developing on this code base, use the following commands to install dev dependencies</p>
<pre><code class="language-shell">pip install -e .[dev]
pip install md-click@git+https://github.com/kid-116/md-click@support-arguments
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>md-click</code> library is used to generate documentation of the CLI commands, and the particular branch is needed to handle Arguments on the commands that are being documented. Hopefully, this PR will be merged at some point and this install process could be updated: https://github.com/RiveryIO/md-click/pull/12.<br><br>There is a dependency resolution bug (or something) when putting that github reference directly in the <code>pyproject.toml</code> file, so it needs to be run separately after everything else is installed.</p>
</div>
<h3 id="docs-dependencies">Docs dependencies</h3>
<p>The <a href="#oeps-documentation">documentation site</a> (which you are reading right now!) is built with dependencies that are best installed directly into the backend virtual environment, so may as well install them now:</p>
<pre><code class="language-shell">pip install -e .[docs]
</code></pre>
<h2 id="oeps-documentation">OEPS Documentation</h2>
<p>It is easiest to install the documentation dependencies directly into the backend's Python virtual environment, as <a href="#docs-dependencies">described above</a>. Once that is completed, enter the docs directory and run mkdocs commands from there.</p>
<p>To view the docs locally:</p>
<pre><code class="language-shell">cd oeps/docs
mkdocs serve
</code></pre>
<p>Visit http://localhost:8000 for a live preview of the docs content, and make changes to Markdown files in <code>/docs/src</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>All files inside of <code>/docs/src/reference</code> are autogenerated by CLI commands, so those files should never be edited directly.</p>
</div>
<p>To build and publish the docs:</p>
<pre><code class="language-shell">mkdocs build
</code></pre>
<p>Updated content is now in <code>/docs/output</code>. Commit these changes and push to Github to rebuild the public site.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../legacy-migration/" class="btn btn-neutral float-left" title="Migration/Restructure 2023"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../getting-started-with-cli/" class="btn btn-neutral float-right" title="Getting Started with the CLI">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../legacy-migration/" style="color: #fcfcfc">« Previous</a></span>
    
    
      <span><a href="../getting-started-with-cli/" style="color: #fcfcfc">Next »</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>



<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body></html>